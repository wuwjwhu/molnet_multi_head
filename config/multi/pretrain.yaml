model_type: 0
model_name: GraphDRP

marker: multi

cuda_name: cuda:2

# work_dir: GAT_GCN
# work_dir: GDSCv2_zs
work_dir: pretrain
batch_size:
  train: 256
  val: 256
  test: 256
lr: 0.00001
num_epoch: 150
log_interval: 2
split_type: scaffold
seed: 42

dataset_name: pretrain
dataset_path: datasets/random_42/filled_training_set.csv # sync with seed
indicator_path: datasets/random_42/indicators.csv # sync with seed
task_name: [bace, bbbp, clintox, sider, tox21, toxcast, esol, freesolv, lipo]
task_output_dims: [1, 1, 2, 27, 12, 617, 1, 1, 1]
# dataset_performance: [0.858, 0.889, 0.965, 0.840, 0.823, 0.815, 1.302, 2.03, 0.8] # sync with seed 0
# dataset_performance: [0.831, 0.905, 0.955, 0.840, 0.822, 0.822, 1.293, 2.215, 0.745] # sync with seed 1
dataset_performance: [0.821, 0.898, 0.946, 0.838, 0.821, 0.806, 1.276, 2.316, 0.824] # sync with seed 42
num_tasks: 9 # for molnet
num_classification_tasks: 6 # for molnet

dataset_type:
  scale: 1
  select_type: zeroshot
  # r3  three datasets are all random, and not mixed
  # m2r train and val datasets are mixed, test dataset is random
  # dataset_path: /home/lk/project/NCI60_dataset/normal_format
  # dataset_path: /home/lk/project/NCI60_dataset/selected
  # dataset_path: datasets/esol/normalized_esol.csv
  # dataset_path: datasets/raw_data/molnet/combined_main.csv
  train: 0.8
  val: 0.1
  test: 0.1



model:

  drug_module:
    module_name:
      - GATConv
      - GCNConv
    input_drug_feature_dim:  78
    output_drug_feature_dim: 128
    num_labels: 1 # vary with dataset
    layer_num: 2

    gnn_layers:
      -
        intput: 78
        output: 78
        dropout: 0.0
        feature_pre_dropout: 0
        heads: 10
      -
        intput: 780
        output: 780
        dropout: 0.0
        feature_pre_dropout: 0


    linear_layers:
      -
        operate_name: linear
        param:
          - 1560
          - 500
      -
        operate_name: relu
      -
        operate_name: dropout
        param: 0.5
      -
        operate_name: linear
        param:
          - 500
          - 128

      # -
      #   operate_name: linear
      #   param:
      #     - 1800
      #     - 1500
      # -
      #   operate_name: relu
      # -
      #   operate_name: dropout
      #   param: 0.2

    graph_pooling: max_mean
    dropout: 0.5

  cell_module:
    module_name: Conv1d
    input_cell_feature_dim: 735
    output_cell_feature_dim: 128
    fc_1_dim: 128
    layer_num: 3
    layer_hyperparameter:
      kernel_size:
        - 8
        - 8
        - 8
      maxpool1d:
        - 3
        - 3
        - 3
      cnn_channels:
        - 32
        - 64
        - 128


  fusion_module:
    fc_1_dim: 1024
    fc_2_dim: 128
    fc_3_dim: 1
    dropout: 0.5
    fusion_mode: concat
